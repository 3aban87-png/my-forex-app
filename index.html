<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forex Pro App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Tahoma, sans-serif; background-color: #0f172a; color: white; margin: 0; padding-bottom: 80px; overflow-x: hidden; }
        .header { background: #1e293b; padding: 15px; text-align: center; font-weight: bold; border-bottom: 2px solid #334155; position: sticky; top: 0; z-index: 100; }
        .page { display: none; padding: 20px; animation: slideUp 0.3s ease; }
        .active-page { display: block; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .card { background: #1e293b; padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #334155; }
        input, select { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: white; box-sizing: border-box; font-family: Tahoma; }
        button { width: 100%; padding: 14px; background: #3b82f6; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.2s; margin-top: 10px; }
        button:active { transform: scale(0.98); }
        .navbar { position: fixed; bottom: 0; width: 100%; background: #1e293b; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #334155; }
        .nav-item { color: #94a3b8; border: none; background: none; font-size: 10px; flex: 1; cursor: pointer; text-align: center; }
        .nav-item.active { color: #3b82f6; }
        .icon { font-size: 20px; display: block; margin-bottom: 4px; }
        code { display: block; background: #000; padding: 10px; border-radius: 5px; color: #4ade80; text-align: center; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="header" id="page-title">Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡</div>

    <div id="signals" class="page active-page">
        <div class="card">
            <div style="display: flex; justify-content: space-between;"><strong>XAUUSD (Ø·Ù„Ø§)</strong> <span style="color:#2ecc71">BUY ğŸŸ¢</span></div>
            <p style="font-size: 12px; color: #94a3b8;">ÙˆØ±ÙˆØ¯: 2045.50 | TP: 2060.00 | SL: 2038.00</p>
        </div>
    </div>

    <div id="copytrade" class="page">
        <h3>ğŸ”„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú©Ù¾ÛŒâ€ŒØªØ±ÛŒØ¯</h3>
        <div class="card">
            <label>Ø§Ù†ØªØ®Ø§Ø¨ Ø±ÙˆØ´ Ø§ØªØµØ§Ù„:</label>
            <select id="conn-method" onchange="toggleConnMethod()">
                <option value="meta">Ø±ÙˆØ´ Ø§Ø¨Ø±ÛŒ (MetaApi)</option>
                <option value="ea">Ø±ÙˆØ´ Ø§Ú©Ø³Ù¾Ø±Øª (EA)</option>
            </select>
        </div>

        <div id="meta-fields" class="card">
            <input type="text" id="mt_acc" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ø­Ø³Ø§Ø¨">
            <input type="password" id="mt_pass" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
            <input type="text" id="mt_serv" placeholder="Ø³Ø±ÙˆØ± (Ù…Ø«Ù„Ø§ WMMarkets-Live)">
            <button onclick="saveSettings()" style="background:#16a34a">Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø§ØªØµØ§Ù„ Ø§Ø¨Ø±ÛŒ</button>
        </div>

        <div id="ea-fields" class="card" style="display:none">
            <p style="font-size:12px; color:#fbbf24">Ø¢Ù…ÙˆØ²Ø´: ÙØ§ÛŒÙ„ EA Ø±Ø§ Ø¯Ø± Ù…ØªØ§ØªØ±ÛŒØ¯Ø± Ù†ØµØ¨ Ùˆ Ú©Ø¯ Ø²ÛŒØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:</p>
            <code>ID: 835971</code>
            <button onclick="window.open('#')">ğŸ“¥ Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ EA</button>
        </div>

        <div class="card">
            <label>Ø­Ø¬Ù… Ù…Ø¹Ø§Ù…Ù„Ø§Øª:</label>
            <select id="vol-mode" onchange="toggleVol()">
                <option value="auto">Ù‡ÙˆØ´Ù…Ù†Ø¯ (Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø±Ù…Ø§ÛŒÙ‡)</option>
                <option value="manual">Ø¯Ø³ØªÛŒ (Ø­Ø¬Ù… Ø«Ø§Ø¨Øª)</option>
            </select>
            <input type="number" id="fixed-lot" style="display:none" step="0.01" placeholder="Ù…Ø«Ù„Ø§ 0.02">
        </div>
    </div>

    <div id="calc" class="page">
        <h3>ğŸ§® Ù…Ø§Ø´ÛŒÙ†â€ŒØ­Ø³Ø§Ø¨</h3>
        <input type="number" id="bal" placeholder="Ù…ÙˆØ¬ÙˆØ¯ÛŒ">
        <input type="number" id="rsk" placeholder="Ø¯Ø±ØµØ¯ Ø±ÛŒØ³Ú©">
        <input type="number" id="st" placeholder="Ø§Ø³ØªØ§Ù¾ (Ù¾ÛŒÙ¾)">
        <button onclick="doCalc()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
        <div id="res" style="text-align:center; margin-top:10px; color:#4ade80"></div>
    </div>
    <div id="public" class="page"><h3>ğŸ“¢ Ø§Ø®Ø¨Ø§Ø± Ú©Ø§Ù†Ø§Ù„</h3></div>
    <div id="support" class="page"><h3>ğŸ§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</h3><button>Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…</button></div>

    <nav class="navbar">
        <button class="nav-item" onclick="showPage('support', 'Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ')"><span class="icon">ğŸ§</span>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</button>
        <button class="nav-item" onclick="showPage('public', 'Ú©Ø§Ù†Ø§Ù„')"><span class="icon">ğŸ“¢</span>Ú©Ø§Ù†Ø§Ù„</button>
        <button class="nav-item" onclick="showPage('calc', 'Ù…Ø­Ø§Ø³Ø¨Ø§Øª')"><span class="icon">ğŸ§®</span>Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
        <button class="nav-item" onclick="showPage('copytrade', 'Ú©Ù¾ÛŒâ€ŒØªØ±ÛŒØ¯')"><span class="icon">ğŸ”„</span>Ú©Ù¾ÛŒâ€ŒØªØ±ÛŒØ¯</button>
        <button class="nav-item active" onclick="showPage('signals', 'Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§')"><span class="icon">ğŸ“ˆ</span>Ø³ÛŒÚ¯Ù†Ø§Ù„</button>
    </nav>

    <script>
        const tg = window.Telegram.WebApp; tg.expand();
        function showPage(p, t){
            document.querySelectorAll('.page').forEach(x => x.classList.remove('active-page'));
            document.getElementById(p).classList.add('active-page');
            document.getElementById('page-title').innerText = t;
            document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }
        function toggleConnMethod(){
            const m = document.getElementById('conn-method').value;
            document.getElementById('meta-fields').style.display = (m==='meta')?'block':'none';
            document.getElementById('ea-fields').style.display = (m==='ea')?'block':'none';
        }
        function toggleVol(){
            const m = document.getElementById('vol-mode').value;
            document.getElementById('fixed-lot').style.display = (m==='manual')?'block':'none';
        }
        function saveSettings(){
            const data = { acc: document.getElementById('mt_acc').value, mode: document.getElementById('vol-mode').value };
            tg.sendData(JSON.stringify(data)); // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø±Ø¨Ø§Øª Ù¾Ø§ÛŒØªÙˆÙ†
        }
        function doCalc(){
            const r = (document.getElementById('bal').value * (document.getElementById('rsk').value/100)) / (document.getElementById('st').value * 10);
            document.getElementById('res').innerText = "Ø­Ø¬Ù…: " + r.toFixed(2);
        }
    </script>
</body>
</html>
